<!-- templates/transcription/partials/transcription_detail.html -->
<div class="modal-header bg-primary text-white">
    <h5 class="modal-title">
        <i class="bi bi-file-text"></i> {{ media_file.original_filename }}
    </h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
    <div class="row mb-3">
        <div class="col-md-6">
            <h6><i class="bi bi-info-circle"></i> Інформація про файл</h6>
            <ul class="list-unstyled">
                <li><strong>Тип:</strong> {{ media_file.get_file_type_display }}</li>
                <li><strong>Завантажено:</strong> {{ media_file.upload_date|date:"d.m.Y H:i" }}</li>
                <li><strong>Мова:</strong> {{ media_file.get_language_display }}</li>
                {% if media_file.noise_cancellation %}
                    <li><i class="bi bi-check-circle text-success"></i> Зменшення шуму</li>
                {% endif %}
                {% if media_file.diarisation %}
                    <li><i class="bi bi-check-circle text-success"></i> Розділення мовців</li>
                {% endif %}
            </ul>
        </div>
        <div class="col-md-6">
            <h6><i class="bi bi-share"></i> Поділитися</h6>
            {% if media_file.is_shared %}
                <div class="alert alert-info">
                    <i class="bi bi-link-45deg"></i> Цей файл доступний за посиланням:
                    <br>
                    <a href="{% url 'shared_transcription' media_file.shared_url %}" 
                       target="_blank" class="btn btn-sm btn-outline-primary mt-2">
                        Відкрити посилання <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            {% else %}
                <p class="text-muted">Файл не спільний</p>
            {% endif %}
        </div>
    </div>
    
    <h6><i class="bi bi-chat-text"></i> Розпізнаний текст</h6>
    <div class="transcription-text">
        {{ media_file.recognized_text|linebreaks }}
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
    <button type="button" class="btn btn-primary" onclick="copyToClipboard()">
        <i class="bi bi-clipboard"></i> Копіювати текст
    </button>
</div>

<script>
function copyToClipboard() {
    const text = document.querySelector('.transcription-text').innerText;
    navigator.clipboard.writeText(text).then(function() {
        // Show success message
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="bi bi-check"></i> Скопійовано!';
        btn.classList.add('btn-success');
        btn.classList.remove('btn-primary');
        
        setTimeout(() => {
            btn.innerHTML = originalText;
            btn.classList.add('btn-primary');
            btn.classList.remove('btn-success');
        }, 2000);
    });
}
</script>
